<!DOCTYPE html>
<html lang="{{ current_user.language if current_user.is_authenticated else 'es' }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GarBotGPT - Inteligencia Artificial de GarolaCorp</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
  <style>
    html.lenis, html.lenis body {
      height: auto;
    }

    .lenis.lenis-smooth {
      scroll-behavior: auto !important;
    }

    .lenis.lenis-smooth [data-lenis-prevent] {
      overscroll-behavior: contain;
    }

    .lenis.lenis-stopped {
      overflow: hidden;
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: #0A0F1C; /* Dark blue from pptx.py */
      color: #E8EBFC; /* Light gray from pptx.py */
      overflow-x: hidden;
    }

    .hero {
      position: relative;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      background: linear-gradient(135deg, #0A0F1C 0%, #7B2CBF 100%); /* Gradient from pptx.py */
      overflow: hidden;
    }

    .canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      opacity: 0.4;
    }

    .feature-card, .arch-card, .settings-card {
      background: #1A1F2C; /* Slightly lighter than body bg */
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 4px 20px rgba(0, 228, 255, 0.1); /* Cyan shadow */
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .feature-card:hover, .arch-card:hover, .settings-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 8px 30px rgba(0, 228, 255, 0.2);
    }

    .cta-button {
      background: #00E4FF; /* Cyan from pptx.py */
      color: #0A0F1C;
      padding: 0.75rem 2rem;
      border-radius: 8px;
      font-weight: 600;
      transition: background-color 0.3s ease, transform 0.3s ease;
    }

    .cta-button:hover {
      background: #7B2CBF; /* Purple from pptx.py */
      transform: scale(1.05);
    }

    .theme-toggle i {
      color: #E8EBFC;
      transition: color 0.3s ease;
    }

    .theme-toggle:hover i {
      color: #00E4FF;
    }

    .chat-preview {
      background: #1A1F2C;
      border-radius: 12px;
      padding: 1rem;
      max-height: 400px;
      overflow-y: auto;
    }

    .chat-message {
      margin-bottom: 1rem;
      padding: 1rem;
      border-radius: 8px;
    }

    .chat-message.user {
      background: #00E4FF;
      color: #0A0F1C;
      margin-left: 2rem;
    }

    .chat-message.bot {
      background: #7B2CBF;
      color: #E8EBFC;
      margin-right: 2rem;
    }

    .chat-input {
      background: #2A2F3C;
      border: 1px solid #00E4FF;
      border-radius: 8px;
      padding: 0.5rem;
      color: #E8EBFC;
    }

    .chat-input::placeholder {
      color: #A0A8C0;
    }

    .screenshot-placeholder {
      background: #2A2F3C;
      border: 2px solid #00E4FF;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #E8EBFC;
      font-size: 1.2rem;
    }
  </style>
</head>
<body class="{{ current_user.theme if current_user.is_authenticated else 'dark' }}">
  <!-- Hero Section -->
  <section class="hero">
    <canvas class="canvas"></canvas>
    <div class="max-w-5xl mx-auto px-4">
      <img src="{{ url_for('static', filename='img/garbotgpt-logo.png') }}" alt="GarBotGPT Logo" class="h-16 mb-6 mx-auto opacity-0" id="hero-logo" onerror="this.style.display='none'; document.getElementById('logo-placeholder').style.display='block';">
      <div id="logo-placeholder" class="hidden text-center text-#E8EBFC mb-6">[Logo Placeholder]</div>
      {% if current_user.is_authenticated %}
        <h1 class="text-5xl md:text-7xl font-bold mb-6 opacity-0" id="hero-title">¡Bienvenid@, {{ current_user.username }}!</h1>
        <p class="text-xl md:text-2xl mb-8 opacity-0" id="hero-text">Interactúa con GarBotGPT, tu asistente de IA avanzado creado por GarolaCorp.</p>
        <a href="{{ url_for('chat') }}" class="cta-button inline-block opacity-0" id="hero-cta">Ir al Chat</a>
      {% else %}
        <h1 class="text-5xl md:text-7xl font-bold mb-6 opacity-0" id="hero-title">GarBotGPT</h1>
        <p class="text-xl md:text-2xl mb-8 opacity-0" id="hero-text">Potencia tu productividad con la inteligencia artificial de GarolaCorp.</p>
        <div class="space-x-4">
          <a href="{{ url_for('login') }}" class="cta-button inline-block opacity-0" id="hero-cta-login">Iniciar Sesión</a>
          <a href="{{ url_for('register') }}" class="cta-button inline-block opacity-0" id="hero-cta-register">Registrarse</a>
        </div>
      {% endif %}
    </div>
    <!-- Theme Toggle -->
    <button class="theme-toggle fixed top-4 right-4 text-2xl opacity-0" id="theme-toggle">
      <i class="fas {{ 'fa-moon' if current_user.theme == 'light' else 'fa-sun' if current_user.is_authenticated else 'fa-moon' }}"></i>
    </button>
    <!-- Language Selector -->
    <div class="fixed top-4 left-4 opacity-0" id="lang-selector">
      <select id="language" class="bg-#1A1F2C text-#E8EBFC border border-#00E4FF rounded px-2 py-1">
        <option value="es" {% if current_user.language == 'es' or not current_user.is_authenticated %}selected{% endif %}>Español</option>
        <option value="en" {% if current_user.language == 'en' %}selected{% endif %}>English</option>
        <option value="ca" {% if current_user.language == 'ca' %}selected{% endif %}>Català</option>
      </select>
    </div>
  </section>

  <!-- Features Section -->
  <section class="section py-16">
    <h2 class="text-4xl font-bold mb-12 text-center opacity-0" id="features-title">Características de GarBotGPT</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto px-4">
      <div class="feature-card opacity-0" id="feature-1">
        <i class="fas fa-globe text-3xl text-#00E4FF mb-4"></i>
        <h3 class="text-2xl font-semibold mb-4">Soporte Multilingüe</h3>
        <p class="text-#E8EBFC">Interactúa en Español, Inglés o Catalán, con respuestas personalizadas según tu idioma.</p>
      </div>
      <div class="feature-card opacity-0" id="feature-2">
        <i class="fas fa-microphone text-3xl text-#00E4FF mb-4"></i>
        <h3 class="text-2xl font-semibold mb-4">Entrada por Voz</h3>
        <p class="text-#E8EBFC">Usa Webkit Speech Recognition para enviar mensajes por voz, simplificando la interacción.</p>
      </div>
      <div class="feature-card opacity-0" id="feature-3">
        <i class="fas fa-cog text-3xl text-#00E4FF mb-4"></i>
        <h3 class="text-2xl font-semibold mb-4">Personalización Avanzada</h3>
        <p class="text-#E8EBFC">Configura modelos de IA, temperatura y temas visuales para una experiencia única.</p>
      </div>
    </div>
  </section>

  <!-- Architecture Section -->
  <section class="section py-16 bg-#1A1F2C">
    <h2 class="text-4xl font-bold mb-12 text-center opacity-0" id="arch-title">Arquitectura del Sistema</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto px-4">
      <div class="arch-card opacity-0" id="arch-1">
        <i class="fas fa-server text-3xl text-#00E4FF mb-4"></i>
        <h3 class="text-2xl font-semibold mb-4">Backend con Flask</h3>
        <p class="text-#E8EBFC">API RESTful con Flask y autenticación segura mediante Flask-Login y bcrypt.</p>
      </div>
      <div class="arch-card opacity-0" id="arch-2">
        <i class="fas fa-database text-3xl text-#00E4FF mb-4"></i>
        <h3 class="text-2xl font-semibold mb-4">PostgreSQL</h3>
        <p class="text-#E8EBFC">Base de datos robusta para gestionar usuarios, configuraciones y historial de chats.</p>
      </div>
      <div class="arch-card opacity-0" id="arch-3">
        <i class="fas fa-box text-3xl text-#00E4FF mb-4"></i>
        <h3 class="text-2xl font-semibold mb-4">Docker</h3>
        <p class="text-#E8EBFC">Contenedores con python:3.9-slim para consistencia y despliegue escalable.</p>
      </div>
    </div>
    <div class="mt-8 text-center">
      <img src="{{ url_for('static', filename='screenshots/arch_diagram.png') }}" alt="Diagrama de Arquitectura" class="max-w-full h-auto mx-auto opacity-0" id="arch-diagram" onerror="this.style.display='none'; document.getElementById('arch-placeholder').style.display='flex';">
      <div id="arch-placeholder" class="screenshot-placeholder h-64 max-w-md mx-auto hidden">[Diagrama de Arquitectura]</div>
    </div>
  </section>

  <!-- Chat Preview Section -->
  <section class="section py-16">
    <h2 class="text-4xl font-bold mb-12 text-center opacity-0" id="chat-title">Prueba GarBotGPT</h2>
    <div class="chat-preview max-w-2xl mx-auto opacity-0" id="chat-preview">
      <div class="chat-message user">Hola, ¿cómo puede ayudarme GarBotGPT?</div>
      <div class="chat-message bot">¡Hola! Soy GarBotGPT, creado por GarolaCorp. Puedo responder en Español, Inglés o Catalán. Prueba a preguntarme algo o usa la entrada por voz.</div>
      <div class="chat-message user">¿Qué tecnologías usas?</div>
      <div class="chat-message bot">Estoy construido con Flask, PostgreSQL, y Docker, con integración de OpenAI y Gemini para respuestas inteligentes.</div>
    </div>
    <div class="mt-4 max-w-2xl mx-auto flex space-x-2">
      <input type="text" class="chat-input flex-grow" placeholder="Escribe un mensaje (demostración)..." readonly>
      <button class="cta-button"><i class="fas fa-microphone"></i></button>
    </div>
    <p class="text-center mt-4 text-#E8EBFC opacity-0" id="chat-note">Inicia sesión para usar el chat completo con entrada por voz.</p>
  </section>

  <!-- Settings Preview Section -->
  <section class="section py-16 bg-#1A1F2C">
    <h2 class="text-4xl font-bold mb-12 text-center opacity-0" id="settings-title">Personaliza tu Experiencia</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto px-4">
      <div class="settings-card opacity-0" id="settings-1">
        <i class="fas fa-robot text-3xl text-#00E4FF mb-4"></i>
        <h3 class="text-2xl font-semibold mb-4">Modelos de IA</h3>
        <p class="text-#E8EBFC">Elige entre modelos como gpt-3.5-turbo o Gemini para respuestas optimizadas.</p>
      </div>
      <div class="settings-card opacity-0" id="settings-2">
        <i class="fas fa-sliders-h text-3xl text-#00E4FF mb-4"></i>
        <h3 class="text-2xl font-semibold mb-4">Ajustes de Chat</h3>
        <p class="text-#E8EBFC">Configura temperatura y tokens máximos para controlar la creatividad de las respuestas.</p>
      </div>
    </div>
    {% if current_user.is_authenticated %}
      <div class="text-center mt-8">
        <a href="{{ url_for('settings') }}" class="cta-button inline-block opacity-0" id="settings-cta">Configurar Ahora</a>
      </div>
    {% endif %}
  </section>

  <!-- Deployment Section -->
  <section class="section py-16">
    <h2 class="text-4xl font-bold mb-12 text-center opacity-0" id="deploy-title">Desplegado en Render</h2>
    <div class="max-w-3xl mx-auto px-4 opacity-0" id="deploy-text">
      <p class="text-xl mb-4 text-#E8EBFC">GarBotGPT está alojado en Render con despliegue automático desde GitHub, usando Docker y PostgreSQL para máxima fiabilidad.</p>
      <p class="text-xl mb-8 text-#E8EBFC">Configuración segura con variables de entorno y certificado SSL en garbotgpt.com.</p>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <img src="{{ url_for('static', filename='screenshots/render_dashboard_app.png') }}" alt="Render Dashboard App" class="max-w-full h-auto opacity-0" id="deploy-img-app" onerror="this.style.display='none'; document.getElementById('deploy-placeholder-app').style.display='flex';">
          <div id="deploy-placeholder-app" class="screenshot-placeholder h-48 max-w-sm mx-auto hidden">[Render Dashboard App]</div>
        </div>
        <div>
          <img src="{{ url_for('static', filename='screenshots/render_dashboard_db.png') }}" alt="Render Dashboard DB" class="max-w-full h-auto opacity-0" id="deploy-img-db" onerror="this.style.display='none'; document.getElementById('deploy-placeholder-db').style.display='flex';">
          <div id="deploy-placeholder-db" class="screenshot-placeholder h-48 max-w-sm mx-auto hidden">[Render Dashboard DB]</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Future Plans Section -->
  <section class="section py-16 bg-#1A1F2C">
    <h2 class="text-4xl font-bold mb-12 text-center opacity-0" id="future-title">Futuro de GarBotGPT</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto px-4">
      <div class="feature-card opacity-0" id="future-1">
        <i class="fas fa-image text-3xl text-#00E4FF mb-4"></i>
        <h3 class="text-2xl font-semibold mb-4">IA Multimodal</h3>
        <p class="text-#E8EBFC">Soporte para procesar imágenes y texto combinados para interacciones más ricas.</p>
      </div>
      <div class="feature-card opacity-0" id="future-2">
        <i class="fas fa-plug text-3xl text-#00E4FF mb-4"></i>
        <h3 class="text-2xl font-semibold mb-4">Integraciones</h3>
        <p class="text-#E8EBFC">Conexión con herramientas como Slack para flujos de trabajo colaborativos.</p>
      </div>
      <div class="feature-card opacity-0" id="future-3">
        <i class="fas fa-users text-3xl text-#00E4FF mb-4"></i>
        <h3 class="text-2xl font-semibold mb-4">Escalabilidad</h3>
        <p class="text-#E8EBFC">Preparado para soportar millones de usuarios con un rendimiento óptimo.</p>
      </div>
    </div>
  </section>

  <!-- Call to Action Section -->
  <section class="section py-16">
    <h2 class="text-4xl font-bold mb-12 text-center opacity-0" id="cta-title">Únete al Futur con GarBotGPT</h2>
    <p class="text-xl max-w-2xl mx-auto mb-8 text-center opacity-0" id="cta-text">Transforma tu productividad con la IA de GarolaCorp. ¡Regístrate o inicia sesión ahora!</p>
    <div class="text-center">
      {% if current_user.is_authenticated %}
        <a href="{{ url_for('chat') }}" class="cta-button inline-block opacity-0" id="cta-button">Empezar a Chatear</a>
      {% else %}
        <a href="{{ url_for('register') }}" class="cta-button inline-block opacity-0" id="cta-button">Comenzar Ahora</a>
      {% endif %}
    </div>
  </section>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script>
  <script>
    // Initialize Lenis for smooth scrolling
    const lenis = new Lenis({
      duration: 1.5,
      easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
      smoothWheel: true
    });

    function raf(time) {
      lenis.raf(time);
      ScrollTrigger.update();
      requestAnimationFrame(raf);
    }
    requestAnimationFrame(raf);

    // GSAP Animations
    gsap.registerPlugin(ScrollTrigger);

    // Hero Section Timeline
    const heroTl = gsap.timeline();
    heroTl
      .fromTo("#hero-logo, #logo-placeholder", { opacity: 0, scale: 0.8 }, { opacity: 1, scale: 1, duration: 1, ease: "power3.out" })
      .fromTo("#hero-title", { opacity: 0, y: 100 }, { opacity: 1, y: 0, duration: 1, ease: "power3.out" }, "-=0.5")
      .fromTo("#hero-text", { opacity: 0, y: 100 }, { opacity: 1, y: 0, duration: 1, ease: "power3.out" }, "-=0.5")
      .fromTo("#hero-cta, #hero-cta-login, #hero-cta-register", { opacity: 0, y: 100 }, { opacity: 1, y: 0, duration: 1, ease: "power3.out" }, "-=0.5")
      .fromTo("#theme-toggle, #lang-selector", { opacity: 0, x: -50 }, { opacity: 1, x: 0, duration: 0.8, ease: "power3.out" }, "-=0.5");

    // Particle Background Effect
    const canvas = document.querySelector(".canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const particlesArray = [];
    const numberOfParticles = 60;

    class Particle {
      constructor() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.size = Math.random() * 4 + 2;
        this.speedX = Math.random() * 0.4 - 0.2;
        this.speedY = Math.random() * 0.4 - 0.2;
        this.color = '#00E4FF'; // Cyan from pptx.py
      }
      update() {
        this.x += this.speedX;
        this.y += this.speedY;
        if (this.size > 0.2) this.size -= 0.01;
        if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
        if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
      }
      draw() {
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    function initParticles() {
      for (let i = 0; i < numberOfParticles; i++) {
        particlesArray.push(new Particle());
      }
    }

    function animateParticles() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let i = 0; i < particlesArray.length; i++) {
        particlesArray[i].update();
        particlesArray[i].draw();
        if (particlesArray[i].size <= 0.2) {
          particlesArray.splice(i, 1);
          particlesArray.push(new Particle());
          i--;
        }
      }
      requestAnimationFrame(animateParticles);
    }

    initParticles();
    animateParticles();

    window.addEventListener("resize", () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });

    // Features Section Animation
    gsap.fromTo("#features-title", 
      { opacity: 0, y: 50 },
      { 
        opacity: 1, 
        y: 0, 
        duration: 1, 
        ease: "power3.out",
        scrollTrigger: {
          trigger: "#features-title",
          start: "top 80%",
          end: "top 20%",
          toggleActions: "play none none reverse"
        }
      }
    );

    gsap.utils.toArray(".feature-card").forEach((card, i) => {
      gsap.fromTo(card, 
        { opacity: 0, y: 50 },
        { 
          opacity: 1, 
          y: 0, 
          duration: 1, 
          delay: i * 0.2,
          ease: "power3.out",
          scrollTrigger: {
            trigger: card,
            start: "top 80%",
            end: "top 20%",
            toggleActions: "play none none reverse"
          }
        }
      );
    });

    // Architecture Section Animation
    gsap.fromTo("#arch-title", 
      { opacity: 0, y: 50 },
      { 
        opacity: 1, 
        y: 0, 
        duration: 1, 
        ease: "power3.out",
        scrollTrigger: {
          trigger: "#arch-title",
          start: "top 80%",
          end: "top 20%",
          toggleActions: "play none none reverse"
        }
      }
    );

    gsap.utils.toArray(".arch-card").forEach((card, i) => {
      gsap.fromTo(card, 
        { opacity: 0, y: 50 },
        { 
          opacity: 1, 
          y: 0, 
          duration: 1, 
          delay: i * 0.2,
          ease: "power3.out",
          scrollTrigger: {
            trigger: card,
            start: "top 80%",
            end: "top 20%",
            toggleActions: "play none none reverse"
          }
        }
      );
    });

    gsap.fromTo("#arch-diagram, #arch-placeholder", 
      { opacity: 0, scale: 0.9 },
      { 
        opacity: 1, 
        scale: 1, 
        duration: 1, 
        ease: "power3.out",
        scrollTrigger: {
          trigger: "#arch-diagram, #arch-placeholder",
          start: "top 80%",
          end: "top 20%",
          toggleActions: "play none none reverse"
        }
      }
    );

    // Chat Preview Animation
    gsap.fromTo("#chat-title", 
      { opacity: 0, y: 50 },
      { 
        opacity: 1, 
        y: 0, 
        duration: 1, 
        ease: "power3.out",
        scrollTrigger: {
          trigger: "#chat-title",
          start: "top 80%",
          end: "top 20%",
          toggleActions: "play none none reverse"
        }
      }
    );

    gsap.fromTo("#chat-preview, .chat-input, .cta-button, #chat-note", 
      { opacity: 0, y: 50 },
      { 
        opacity: 1, 
        y: 0, 
        duration: 1, 
        delay: 0.2,
        ease: "power3.out",
        scrollTrigger: {
          trigger: "#chat-preview",
          start: "top 80%",
          end: "top 20%",
          toggleActions: "play none none reverse"
        }
      }
    );

    // Settings Preview Animation
    gsap.fromTo("#settings-title", 
      { opacity: 0, y: 50 },
      { 
        opacity: 1, 
        y: 0, 
        duration: 1, 
        ease: "power3.out",
        scrollTrigger: {
          trigger: "#settings-title",
          start: "top 80%",
          end: "top 20%",
          toggleActions: "play none none reverse"
        }
      }
    );

    gsap.utils.toArray(".settings-card").forEach((card, i) => {
      gsap.fromTo(card, 
        { opacity: 0, y: 50 },
        { 
          opacity: 1, 
          y: 0, 
          duration: 1, 
          delay: i * 0.2,
          ease: "power3.out",
          scrollTrigger: {
            trigger: card,
            start: "top 80%",
            end: "top 20%",
            toggleActions: "play none none reverse"
          }
        }
      );
    });

    gsap.fromTo("#settings-cta", 
      { opacity: 0, y: 50 },
      { 
        opacity: 1, 
        y: 0, 
        duration: 1, 
        ease: "power3.out",
        scrollTrigger: {
          trigger: "#settings-cta",
          start: "top 80%",
          end: "top 20%",
          toggleActions: "play none none reverse"
        }
      }
    );

    // Deployment Section Animation
    gsap.fromTo("#deploy-title", 
      { opacity: 0, y: 50 },
      { 
        opacity: 1, 
        y: 0, 
        duration: 1, 
        ease: "power3.out",
        scrollTrigger: {
          trigger: "#deploy-title",
          start: "top 80%",
          end: "top 20%",
          toggleActions: "play none none reverse"
        }
      }
    );

    gsap.fromTo("#deploy-text, #deploy-img-app, #deploy-img-db, #deploy-placeholder-app, #deploy-placeholder-db", 
      { opacity: 0, y: 50 },
      { 
        opacity: 1, 
        y: 0, 
        duration: 1, 
        delay: 0.2,
        ease: "power3.out",
        scrollTrigger: {
          trigger: "#deploy-text",
          start: "top 80%",
          end: "top 20%",
          toggleActions: "play none none reverse"
        }
      }
    );

    // Future Plans Animation
    gsap.fromTo("#future-title", 
      { opacity: 0, y: 50 },
      { 
        opacity: 1, 
        y: 0, 
        duration: 1, 
        ease: "power3.out",
        scrollTrigger: {
          trigger: "#future-title",
          start: "top 80%",
          end: "top 20%",
          toggleActions: "play none none reverse"
        }
      }
    );

    gsap.utils.toArray("#future-1, #future-2, #future-3").forEach((card, i) => {
      gsap.fromTo(card, 
        { opacity: 0, y: 50 },
        { 
          opacity: 1, 
          y: 0, 
          duration: 1, 
          delay: i * 0.2,
          ease: "power3.out",
          scrollTrigger: {
            trigger: card,
            start: "top 80%",
            end: "top 20%",
            toggleActions: "play none none reverse"
          }
        }
      );
    });

    // CTA Section Animation
    gsap.fromTo("#cta-title", 
      { opacity: 0, y: 50 },
      { 
        opacity: 1, 
        y: 0, 
        duration: 1, 
        ease: "power3.out",
        scrollTrigger: {
          trigger: "#cta-title",
          start: "top 80%",
          end: "top 20%",
          toggleActions: "play none none reverse"
        }
      }
    );

    gsap.fromTo("#cta-text, #cta-button", 
      { opacity: 0, y: 50 },
      { 
        opacity: 1, 
        y: 0, 
        duration: 1, 
        delay: 0.2,
        ease: "power3.out",
        scrollTrigger: {
          trigger: "#cta-text",
          start: "top 80%",
          end: "top 20%",
          toggleActions: "play none none reverse"
        }
      }
    );

    // Theme Toggle
    document.querySelector('#theme-toggle').addEventListener('click', () => {
      const theme = document.body.classList.contains('dark') ? 'light' : 'dark';
      document.body.classList.toggle('dark');
      document.body.classList.toggle('light');
      fetch('/update_theme', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ theme: theme })
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          const icon = document.querySelector('#theme-toggle i');
          icon.classList.toggle('fa-moon');
          icon.classList.toggle('fa-sun');
        }
      });
    });

    // Language Selector
    document.querySelector('#language').addEventListener('change', (e) => {
      const language = e.target.value;
      fetch('/update_language', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ language: language })
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          window.location.reload();
        }
      });
    });
  </script>
</body>
</html>